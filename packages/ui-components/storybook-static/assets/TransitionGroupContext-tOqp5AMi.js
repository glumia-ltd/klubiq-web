import{r as n,R as d}from"./index-CoXXcpNP.js";import{u as h}from"./useEnhancedEffect-Dze88C9b.js";function V(e){const t=n.useRef(e);return h(()=>{t.current=e}),n.useRef((...r)=>(0,t.current)(...r)).current}const f={};function y(e,t){const r=n.useRef(f);return r.current===f&&(r.current=e(t)),r}const p=[];function b(e){n.useEffect(e,p)}class s{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new s}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function F(){const e=y(s.create).current;return b(e.disposeEffect),e}let i=!0,a=!1;const m=new s,E={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function T(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&E[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function I(e){e.metaKey||e.altKey||e.ctrlKey||(i=!0)}function c(){i=!1}function R(){this.visibilityState==="hidden"&&a&&(i=!0)}function w(e){e.addEventListener("keydown",I,!0),e.addEventListener("mousedown",c,!0),e.addEventListener("pointerdown",c,!0),e.addEventListener("touchstart",c,!0),e.addEventListener("visibilitychange",R,!0)}function O(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return i||T(t)}function g(){const e=n.useCallback(u=>{u!=null&&w(u.ownerDocument)},[]),t=n.useRef(!1);function r(){return t.current?(a=!0,m.start(100,()=>{a=!1}),t.current=!1,!0):!1}function o(u){return O(u)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:r,ref:e}}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},l(e,t)}function C(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l(e,t)}const K=d.createContext(null);export{K as T,C as _,g as a,V as b,s as c,F as u};
